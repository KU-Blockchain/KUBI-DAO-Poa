specVersion: 0.0.5
schema:
  file: ./Schema.gql
dataSources:
  - kind: ethereum/contract
    name: DirectDemocracyTokenFactory
    network: mumbai
    source:
      address: "0x473A5Eca5FCCC2ab28f0c7113A0f5044338C2127"
      abi: DirectDemocracyTokenFactory
      startBlock: 46430300
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - DDTokenCreated
      abis:
        - name: DirectDemocracyTokenFactory
          file: ../abi/DirectDemocracyTokenFactory.json
      eventHandlers:
        - event: TokenCreated(address,string,string,string[],string)
          handler: handleTokenCreated
      file: ./mappings/ddToken/ddTokenFactoryMapping.ts
  - kind: ethereum/contract
    name: ParticipationTokenFactory
    network: mumbai
    source:
      address: "0x5Bc0D4ba69213090e049475F3Add75c7da9Cd3B2"
      abi:  ParticipationTokenFactory
      startBlock: 46430300
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - PTTokenCreated
      abis:
        - name:  ParticipationTokenFactory
          file: ../abi/ParticipationTokenFactory.json
      eventHandlers:
        - event: TokenCreated(address,string,string,string)
          handler: handleTokenCreated
      file: ./mappings/ptToken/ptTokenFactoryMapping.ts
  - kind: ethereum/contract
    name: NFTMembershipFactory
    network: mumbai
    source:
      address: "0x74C82D72bA3cDBdDd9b2667d524DA808c7f582dC"
      abi: NFTMembershipFactory
      startBlock: 46430300
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - NFTMembershipCreated
      abis:
        - name: NFTMembershipFactory
          file: ../abi/NFTMembershipFactory.json
      eventHandlers:
        - event: ContractCreated(address,string[],string,string)
          handler: handleContractCreated
      file: ./mappings/nft/nftMembershipFactoryMapping.ts
  - kind: ethereum/contract
    name: TreasuryFactory
    network: mumbai
    source:
      address: "0xdc604eE6252D5f97c7AA2bDf428a932A0bAc713a"
      abi: TreasuryFactory
      startBlock: 46430300
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - TreasuryCreated
      abis:
        - name: TreasuryFactory
          file: ../abi/TreasuryFactory.json
      eventHandlers:
        - event: TreasuryCreated(indexed address,string)
          handler: handleTreasuryCreated
      file: ./mappings/treasury/treasuryFactoryMapping.ts
templates:
  - kind: ethereum/contract
    name: DirectDemocracyToken
    network: mumbai
    source:
      abi: DirectDemocracyToken
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - DDAllowedRoleName
        - DDToken
        - DDTokenMintEvent
      abis:
        - name: DirectDemocracyToken
          file: ../abi/DirectDemocracyToken.json
      eventHandlers:
        - event: Mint(indexed address,uint256)
          handler: handleTokenMint
      file: ./mappings/ddToken/ddTokenMapping.ts
  - kind: ethereum/contract
    name: ParticipationToken
    network: mumbai
    source:
      abi: ParticipationToken
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - PTAllowedRoleName
        - PTToken
        - PTTokenMintEvent
      abis:
        - name: ParticipationToken
          file: ../abi/ParticipationToken.json
      eventHandlers:
        - event: Mint(indexed address,uint256)
          handler: handleTokenMint
      file: ./mappings/ddToken/ddTokenMapping.ts
  - kind: ethereum/contract
    name: NFTMembership
    network: mumbai
    source:
      abi: NFTMembership
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - NFTMembership
        - NFTMemberType
        - NFTMintEvent
        - NFTMembershipTypeChanged
      abis:
        - name: NFTMembership
          file: ../abi/NFTMembership.json
      eventHandlers:
        - event: mintedNFT(address,string,string)
          handler: handleMintedNFT
        - event: membershipTypeChanged(address,string)
          handler: handleMembershipTypeChanged
      file: ./mappings/nft/nftMembershipMapping.ts
  - kind: ethereum/contract
    name: Treasury
    network: mumbai
    source:
      abi: Treasury
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Treasury
      abis:
        - name: Treasury
          file: ../abi/Treasury.json
      eventHandlers:
        - event: VotingContractSet(address)
          handler: handleVotingSet
      file: ./mappings/treasury/treasuryMapping.ts