specVersion: 0.0.5
schema:
  file: DDtokenSchema.gql
dataSources:
  - kind: ethereum/contract
    name: DirectDemocracyTokenFactory
    network: mumbai
    source:
      address: "0xE57E434c16723B8C26C5291f4D6fE52F918855b2"
      abi: DirectDemocracyTokenFactory
      startBlock: 46430300
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - DDTokenCreated
      abis:
        - name: DirectDemocracyTokenFactory
          file: abi/DirectDemocracyTokenFactory.json
      eventHandlers:
        - event: TokenCreated(address,string,string,string[],string)
          handler: handleTokenCreated
      file: DirectDemocracyTokenFactory/DirectDemocracyTokenFactory.wasm
  - kind: ethereum/contract
    name: NFTMembershipFactory
    network: mumbai
    source:
      address: "0xc57be13a8a8555218dfd95E5c6cce0ea606Eb304"
      abi: NFTMembershipFactory
      startBlock: 46430300
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - NFTMembershipCreated
      abis:
        - name: NFTMembershipFactory
          file: abi/NFTMembershipFactory.json
      eventHandlers:
        - event: ContractCreated(address,string[],string,string)
          handler: handleContractCreated
      file: NFTMembershipFactory/NFTMembershipFactory.wasm
templates:
  - kind: ethereum/contract
    name: DirectDemocracyToken
    network: mumbai
    source:
      abi: DirectDemocracyToken
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - DDAllowedRoleName
        - DDToken
        - DDTokenMintEvent
      abis:
        - name: DirectDemocracyToken
          file: abi/DirectDemocracyToken.json
      eventHandlers:
        - event: Mint(indexed address,uint256)
          handler: handleMintDD
      file: templates/DirectDemocracyToken/DirectDemocracyToken.wasm
  - kind: ethereum/contract
    name: NFTMembership
    network: mumbai
    source:
      abi: NFTMembership
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - NFTMembership
        - NFTMemberType
        - NFTMintEvent
        - NFTMembershipTypeChanged
      abis:
        - name: NFTMembership
          file: abi/NFTMembership.json
      eventHandlers:
        - event: mintedNFT(address,string,string)
          handler: handleMintedNFT
        - event: membershipTypeChanged(address,string)
          handler: handleMembershipTypeChanged
      file: templates/NFTMembership/NFTMembership.wasm
