(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3689],{56670:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks",function(){return s(44069)}])},44069:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ea}});var i=s(85893),r=s(67294),o=s(27239),l=s(81136),a=s(57747),n=s(93717),c=s(22757),d=s(48783),u=s(65028),h=s(85970),x=s(33090),m=s(14225),p=s(71293),g=s(93104),j=s(32137),f=s(28493),b=s(36963),y=s(49294),w=e=>{let{project:t,isSelected:s,onSelectProject:r,onDeleteProject:o}=e,[{isDragging:l},a]=(0,y.c)(()=>({type:"project",item:{id:t.id},end:(e,t)=>{let s=t.getDropResult();e&&s&&o(e.id)},collect:e=>({isDragging:e.isDragging()})}));return(0,i.jsx)(m.z,{width:"90%",mx:"5%",ref:a,onClick:()=>r(t.id),bg:s?"purple.300":"ghostwhite",style:{opacity:l?.4:1},_hover:{bg:"#2d86fff7",boxShadow:"md",transform:"scale(1.05)"},children:(0,i.jsx)(p.x,{fontWeight:"900",children:t.name})})},v=s(99272),k=e=>{let{}=e,[{canDrop:t},s]=(0,v.L)(()=>({accept:"project",drop:()=>({name:"TrashBin"}),collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})}));return(0,i.jsx)(a.xu,{ref:s,bg:t?"red.500":"transparent",w:"90%",ml:"5%",h:"50px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"md",children:(0,i.jsx)(p.x,{align:"center",color:"gray.600",children:t?"Release here to delete":"Drag a project here to delete"})})};let C={position:"absolute",width:"100%",height:"100%",zIndex:-1,borderRadius:"inherit",backdropFilter:"blur(50px)",backgroundColor:"rgba(0, 0, 0, .8)"};var S=e=>{let{projects:t,selectedProject:s,onSelectProject:o,onCreateProject:l}=e,[g,y]=(0,r.useState)(""),[v,S]=(0,r.useState)(!1),{handleDeleteProject:I}=(0,j.v)(),T=e=>{I(e)};return(0,i.jsx)(f.W,{backend:b.PD,children:(0,i.jsxs)(a.xu,{w:"15%",minW:"180px",marginRight:0,display:"flex",flexDirection:"column",bg:"transparent",boxShadow:"lg",position:"relative",zIndex:1,children:[(0,i.jsx)("div",{className:"glass",style:C}),(0,i.jsx)(c.X,{textAlign:"center",fontSize:"28px",mb:8,color:"white",mt:4,children:"PROJECTS"}),(0,i.jsx)(a.xu,{flexGrow:1,overflowY:"auto",pl:1,pr:1,children:(0,i.jsx)(d.g,{spacing:4,width:"100%",align:"center",children:t.map(e=>{let t=s&&e.id===s.id;return(0,i.jsx)(w,{project:e,isSelected:t,onSelectProject:o,onDeleteProject:T},e.id)})})}),(0,i.jsx)(u.L,{}),(0,i.jsx)(k,{onDeleteProject:T}),(0,i.jsxs)(n.k,{direction:"column",mt:4,children:[v&&(0,i.jsx)(h.NI,{children:(0,i.jsx)(x.I,{color:"white",placeholder:"New project name",value:g,onChange:e=>y(e.target.value)})}),(0,i.jsx)(m.z,{mt:2,onClick:v?()=>{l(g),y(""),S(!1)}:()=>S(!0),disabled:v&&!g.trim(),ml:"5%",width:"90%",_hover:{bg:"#2d86fff7",boxShadow:"md",transform:"scale(1.05)"},mb:"4",color:"ghostwhite",children:(0,i.jsx)(p.x,{color:"black",children:v?"Save Project":"Create Project"})})]})]})})},I=s(74907),T=s(7963);let P=(0,r.createContext)(),z=()=>(0,r.useContext)(P),H=e=>{let{children:t,initialColumns:s,onColumnChange:o,onUpdateColumns:l,account:a}=e,n=(0,T.p)(),[c,d]=(0,r.useState)(s),{getUsernameByAddress:u,selectedProject:h}=(0,j.v)(),{claimTask:x,updateTask:m,ipfsAddTask:p,completeTask:f,editTaskWeb3:b,submitTask:y}=(0,g.Z)(),{taskManagerContractAddress:w}=(0,I.f)();(0,r.useEffect)(()=>{d(s)},[s]);let v=async(e,t,s,i,r,o)=>{if("inReview"===s&&void 0===r){n({title:"Invalid Submission",description:"Please Enter a submission",status:"error",duration:3500,isClosable:!0});return}let a=[...c],u=a.find(e=>e.id===t),h=a.find(e=>e.id===s);if("open"!==s){let t=u.tasks.findIndex(t=>t.id===e.id);u.tasks.splice(t,1)}let m={...e,name:e.name,description:e.description,difficulty:e.difficulty,estHours:e.estHours,submission:"inReview"===s?r:e.submission,claimedBy:"inProgress"===s?o:"open"===s?"":e.claimedBy};if("inProgress"===s&&await x(w,e.id),"inReview"===s){console.log("in review triggger");let t=(await p(e.name,e.description,"In Review",e.difficulty,e.estHours,r)).path;console.log("ipfsHashString: ",t),console.log("draggedTask.id: ",e.id),console.log("draggedTask.Payout: ",e.Payout),await y(w,e.id,t)}return"completed"===s&&await f(w,e.id),h.tasks=[...h.tasks,m],d(a),l&&l(a),!0},k=async(e,t)=>{let s=((e,t)=>{let{baseKubix:s,multiplier:i}={easy:{baseKubix:1,multiplier:16.5},medium:{baseKubix:4,multiplier:24},hard:{baseKubix:10,multiplier:30},veryHard:{baseKubix:25,multiplier:37.5}}[e];return Math.round(s+i*t)})(e.difficulty,e.estHours);console.log("task: ",e);let i=[...c],r=i.find(e=>e.id===t),o={...e,projectId:h.id,kubixPayout:s};r.tasks.push(o),d(i),l&&await l(i)},C=async(e,t,s,i)=>{let r=[...c],o=r.find(e=>e.id===t),a=((e,t)=>{let{base:s,multiplier:i}={easy:{base:1,multiplier:16.5},medium:{base:4,multiplier:24},hard:{base:10,multiplier:30},veryHard:{base:25,multiplier:37.5}}[e];return Math.round(s+i*t)})(e.difficulty,e.estHours),n={...e,Payout:a};await b(w,a,e.description,i,e.estHours,e.difficulty,"Open",e.name,e.id),o.tasks.splice(s,1,n),d(r),l&&await l(r)},S=async(e,t)=>{let s=[...c],i=s.find(e=>e.id===t),r=i.tasks.findIndex(t=>t.id===e);i.tasks.splice(r,1),d(s),l&&await l(s)};return(0,i.jsx)(P.Provider,{value:{taskColumns:c,moveTask:v,addTask:k,editTask:C,setTaskColumns:d,deleteTask:S},children:t})};var E=s(36855),R=s(89993),N=s(20967),_=s(34292),D=s(24880),W=s(35541),O=s(19778),Y=s(51178),F=s(66205),B=s(54346),U=s(5418),q=s(57169),G=s(14253),L=s(19754),M=s(64859),Z=s(41731),A=e=>{let{isOpen:t,onClose:s,onEditTask:o,onDeleteTask:l,task:a}=e,[n,c]=(0,r.useState)(a.name),[d,u]=(0,r.useState)(a.description),[p,g]=(0,r.useState)(a.difficulty),[j,f]=(0,r.useState)(a.estHours);return(0,i.jsxs)(W.u_,{isOpen:t,onClose:s,children:[(0,i.jsx)(O.Z,{}),(0,i.jsxs)(Y.h,{children:[(0,i.jsx)(M.x,{children:"Edit Task"}),(0,i.jsx)(F.o,{}),(0,i.jsxs)(B.f,{children:[(0,i.jsxs)(h.NI,{children:[(0,i.jsx)(U.l,{children:"Name"}),(0,i.jsx)(x.I,{value:n,onChange:e=>c(e.target.value)})]}),(0,i.jsxs)(h.NI,{mt:4,children:[(0,i.jsx)(U.l,{children:"Description"}),(0,i.jsx)(x.I,{value:d,onChange:e=>u(e.target.value)})]}),(0,i.jsxs)(h.NI,{mt:4,children:[(0,i.jsx)(U.l,{children:"Difficulty"}),(0,i.jsxs)(Z.P,{value:p,onChange:e=>g(e.target.value),children:[(0,i.jsx)("option",{value:"easy",children:"Easy"}),(0,i.jsx)("option",{value:"medium",children:"Medium"}),(0,i.jsx)("option",{value:"hard",children:"Hard"}),(0,i.jsx)("option",{value:"veryHard",children:"Very Hard"})]})]}),(0,i.jsxs)(h.NI,{mt:4,children:[(0,i.jsx)(U.l,{children:"Estimated Hours"}),(0,i.jsx)(x.I,{type:"number",min:"0.5",step:"0.5",value:j,onChange:e=>{let t=parseFloat(e.target.value);isNaN(t)?f(.5):f(t)},onBlur:e=>{let t=parseFloat(e.target.value);t<=.5?f(.5):f(Math.round(2*t)/2)}})]})]}),(0,i.jsxs)(G.m,{children:[(0,i.jsx)(m.z,{colorScheme:"red",mr:"auto",onClick:()=>l(a.id),children:"Delete"}),(0,i.jsx)(m.z,{colorScheme:"teal",onClick:()=>{o({...a,name:n,description:d,difficulty:p,estHours:j}),s()},children:"Save Changes"})]})]})]})},X=s(98280),K=s(11163);let V={position:"absolute",height:"100%",width:"100%",zIndex:-1,borderRadius:"inherit",backdropFilter:"blur(9px)",backgroundColor:"rgba(33, 33, 33, 0.97)"};var J=e=>{let{task:t,columnId:s,onEditTask:o}=e;console.log("task",t);let[l,n]=(0,r.useState)(""),{moveTask:c,deleteTask:x}=z(),{hasExecNFT:g,hasMemberNFT:f,address:b,fetchUserDetails:y}=(0,X.S)(),{getUsernameByAddress:w,setSelectedProjectId:v}=(0,j.v)(),k=(0,K.useRouter)(),C=(0,T.p)(),{isOpen:S,onOpen:I,onClose:P}=(0,N.q)();(0,r.useEffect)(()=>{console.log("this",k.query);let e=k.query.task,s=null==e?void 0:e.projectId;e===t.id?(I(),s&&v(s)):P()},[k.query,t.id,I]);let H=()=>{P(),k.push({pathname:"/tasks/"},void 0,{shallow:!0})},E=async()=>{if(H(),"open"===s){if(f)try{console.log("start1"),await c(t,s,"inProgress",0," ",b),C({title:"Task claimed.",description:"Your task was successfully claimed.",stas:"success",duration:3e3,isClosable:!0})}catch(e){C({title:"Error",description:"There was an error claiming the task.",status:"error",duration:3500,isClosable:!0}),console.error("Error moving task:",e)}else alert("You must own an NFT to claim this task. Go to user to join ")}if("inProgress"===s){if(""===l){C({title:"Invalid Submission",description:"Please Enter a submission",status:"error",duration:3500,isClosable:!0});return}if(f)try{await c(t,s,"inReview",0,l),C({title:"Task submitted.",description:"Your task was successfully submitted.",status:"success",duration:3e3,isClosable:!0})}catch(e){C({title:"Error",description:"There was an error submitting your task.",status:"error",duration:3500,isClosable:!0}),console.error("Error moving task:",e)}else alert("You must own an NFT to submit. Go to user to join")}if("inReview"===s){if(g)try{await c(t,s,"completed",0),C({title:"Task reviewed.",description:"Your task was successfully reviewed.",status:"success",duration:3e3,isClosable:!0})}catch(e){console.error("Error moving task:",e),C({title:"Error",description:"There was an error completing the review.",status:"error",duration:3500,isClosable:!0})}else alert("You must be an executive to complete the review")}if("completed"===s){if(g)try{await x(t.id,s),C({title:"Task deleted.",description:"Your task was successfully deleted.",status:"success",duration:3e3,isClosable:!0})}catch(e){console.error("Error deleting task:",e),C({title:"Error",description:"There was an error deleting the task.",status:"error",duration:3500,isClosable:!0})}else alert("You must be an executive to delete task")}},[R,M]=(0,r.useState)(!1);return t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(W.u_,{isOpen:S,onClose:H,size:"3xl",children:[(0,i.jsx)(O.Z,{}),(0,i.jsxs)(Y.h,{bg:"transparent",textColor:"white",children:[(0,i.jsx)("div",{className:"glass",style:V}),(0,i.jsx)(F.o,{}),(0,i.jsxs)(a.xu,{pt:4,borderTopRadius:"2xl",bg:"transparent",boxShadow:"lg",position:"relative",zIndex:-1,children:[(0,i.jsx)("div",{className:"glass",style:V}),(0,i.jsx)(p.x,{ml:"6",fontSize:"2xl",fontWeight:"bold",children:t.name})]}),(0,i.jsx)(B.f,{children:(0,i.jsxs)(d.g,{spacing:4,align:"start",children:[(0,i.jsx)(a.xu,{children:(0,i.jsx)(p.x,{mb:"4",mt:"4",lineHeight:"6",fontSize:"md",fontWeight:"bold",style:{whiteSpace:"pre-wrap"},children:t.description})}),(0,i.jsxs)(_.U,{width:"100%",children:[(0,i.jsx)(D.C,{colorScheme:{easy:"green",medium:"yellow",hard:"orange",veryhard:"red"}[t.difficulty.toLowerCase().replace(" ","")],children:t.difficulty}),(0,i.jsxs)(D.C,{colorScheme:"blue",children:[t.estHours," hrs"]}),(0,i.jsx)(u.L,{}),t.claimedBy&&(0,i.jsxs)(p.x,{fontSize:"sm",mr:4,children:["Claimed By: ",t.claimerUsername]})]}),"inProgress"===s&&(0,i.jsxs)(h.NI,{children:[(0,i.jsx)(U.l,{fontWeight:"bold",fontSize:"lg",children:"Submission:"}),(0,i.jsx)(q.g,{height:"200px",placeholder:"Type your submission here",value:l,onChange:e=>n(e.target.value)})]}),("inReview"===s||"completed"===s)&&(0,i.jsxs)(a.xu,{children:[(0,i.jsx)(p.x,{color:"gray",fontWeight:"bold",fontSize:"lg",children:"Submission:"}),(0,i.jsx)(p.x,{children:t.submission})]})]})}),(0,i.jsxs)(G.m,{borderTop:"1.5px solid",borderColor:"gray.200",py:2,children:[(0,i.jsx)(a.xu,{flexGrow:1,children:(0,i.jsxs)(p.x,{fontWeight:"bold",fontSize:"m",children:["Reward: ",t.Payout]})}),(0,i.jsxs)(a.xu,{children:[(0,i.jsx)(m.z,{textColor:"white",variant:"outline",onClick:()=>{let e="".concat(window.location.origin,"/tasks/?task=").concat(t.id);navigator.clipboard.writeText(e).then(()=>{C({title:"Link copied",description:"Task link copied to clipboard.",status:"success",duration:3e3,isClosable:!0})}).catch(e=>{C({title:"Failed to copy",description:"There was an issue copying the link.",status:"error",duration:3e3,isClosable:!0}),console.error("Failed to copy link: ",e)})},mr:2,children:"Share"}),"open"===s&&(0,i.jsx)(m.z,{textColor:"white",variant:"outline",onClick:()=>{g?M(!0):alert("You must be an executive to edit.")},mr:2,children:"Edit"}),(0,i.jsx)(m.z,{onClick:E,colorScheme:"teal",children:(()=>{switch(s){case"open":return"Claim";case"inProgress":return"Submit";case"inReview":return"Complete Review";case"completed":return(0,i.jsx)(L.n,{});default:return""}})()})]})]})]})]}),"open"===s&&(0,i.jsx)(A,{isOpen:R,onClose:()=>{M(!1),k.push({pathname:"/tasks/"},void 0,{shallow:!0})},onEditTask:o,task:t,onDeleteTask:e=>x(e,s)})]}):null},$=e=>{let{id:t,name:s,description:r,difficulty:o,estHours:l,index:n,columnId:c,submission:d,claimedBy:u,claimerUsername:h,onEditTask:x,moveTask:m,projectId:g,Payout:j}=e,f=(0,K.useRouter)(),[{isDragging:b},w]=(0,y.c)(()=>({type:"task",item:{id:t,index:n,columnId:c,name:s,description:r,difficulty:o,estHours:l,claimedBy:u,claimerUsername:h,Payout:j,submission:d},collect:e=>({isDragging:e.isDragging()})})),{isOpen:v,onOpen:k,onClose:C}=(0,N.q)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.xu,{ref:w,bg:"ghostwhite",borderRadius:"md",boxShadow:"sm",p:1.5,mb:4,cursor:"grab",style:b?{opacity:.5}:{},onClick:()=>{console.log("projectId: ",g),f.push({pathname:"/tasks/",query:{task:t,projectId:g}},void 0,{shallow:!0})},children:[(0,i.jsx)(a.xu,{fontWeight:"900",children:s}),(0,i.jsx)(a.xu,{fontSize:"xs",children:r.length>40?r.substring(0,40)+"...":r}),(0,i.jsxs)(_.U,{mt:2,spacing:2.5,children:[j&&(0,i.jsx)(a.xu,{fontWeight:"500",children:(0,i.jsxs)(_.U,{spacing:.5,children:[(0,i.jsx)(p.x,{fontSize:"sm",children:"Reward:"}),(0,i.jsx)(p.x,{fontWeight:"extrabold",children:j})]})}),o&&(0,i.jsx)(D.C,{fontSize:"2xs",colorScheme:{easy:"green",medium:"yellow",hard:"orange",veryhard:"red"}[o.toLowerCase().replace(" ","")],children:o}),(0,i.jsxs)(D.C,{fontSize:"2xs",colorScheme:"blue",children:[l," hrs"]})]})]}),(0,i.jsx)(J,{isOpen:v,onClose:C,task:{id:t,name:s,description:r,difficulty:o,estHours:l,Payout:j,submission:d,claimedBy:u,claimerUsername:h},columnId:c,onEditTask:x,moveTask:m})]})},Q=e=>{let{isOpen:t,onClose:s,onAddTask:o}=e,[l,a]=(0,r.useState)(""),[n,c]=(0,r.useState)(""),[u,p]=(0,r.useState)("easy"),[g,j]=(0,r.useState)(.5),[f,b]=(0,r.useState)(!1),y=(0,T.p)();return(0,i.jsxs)(W.u_,{isOpen:t,onClose:s,children:[(0,i.jsx)(O.Z,{}),(0,i.jsxs)(Y.h,{children:[(0,i.jsx)(M.x,{children:"Add Task"}),(0,i.jsx)(F.o,{}),(0,i.jsx)(B.f,{children:(0,i.jsxs)(d.g,{spacing:4,children:[(0,i.jsxs)(h.NI,{id:"task-name",children:[(0,i.jsx)(U.l,{children:"Task Name"}),(0,i.jsx)(x.I,{type:"text",value:l,onChange:e=>a(e.target.value)})]}),(0,i.jsxs)(h.NI,{id:"task-description",children:[(0,i.jsx)(U.l,{children:"Description"}),(0,i.jsx)(q.g,{type:"text",value:n,onChange:e=>c(e.target.value)})]}),(0,i.jsxs)(h.NI,{id:"task-difficulty",children:[(0,i.jsx)(U.l,{children:"Difficulty"}),(0,i.jsxs)(Z.P,{value:u,onChange:e=>p(e.target.value),children:[(0,i.jsx)("option",{value:"easy",children:"Easy"}),(0,i.jsx)("option",{value:"medium",children:"Medium"}),(0,i.jsx)("option",{value:"hard",children:"Hard"}),(0,i.jsx)("option",{value:"veryHard",children:"Very Hard"})]})]}),(0,i.jsxs)(h.NI,{id:"task-estimated-hours",children:[(0,i.jsx)(U.l,{children:"Estimated Hours"}),(0,i.jsx)(x.I,{type:"number",min:"0.5",step:"0.5",value:g,onChange:e=>{let t=parseFloat(e.target.value);isNaN(t)?j(.5):j(t)},onBlur:e=>{let t=parseFloat(e.target.value);t<=.5?j(.5):j(Math.round(2*t)/2)}})]})]})}),(0,i.jsxs)(G.m,{children:[(0,i.jsx)(m.z,{colorScheme:"blue",mr:3,onClick:()=>{(async()=>{b(!0),await o({name:l,description:n,difficulty:u,estHours:g}),y({title:"Task added.",description:"Your task was successfully added.",status:"success",duration:3e3,isClosable:!0}),b(!1),c(""),a("")})(),p("easy"),j(.5),s()},isLoading:f,loadingText:"Adding Task",children:"Add Task"}),(0,i.jsx)(m.z,{variant:"ghost",onClick:s,children:"Cancel"})]})]})]})},ee=s(45166);let et={position:"absolute",width:"100%",height:"100%",zIndex:-1,borderRadius:"inherit",backdropFilter:"blur(60px)",backgroundColor:"rgba(0, 0, 0, .3)"};var es=e=>{let{title:t,tasks:s,columnId:o,projectName:l}=e,n=(0,K.useRouter)(),{moveTask:d,addTask:u,editTask:h}=z(),[x,m]=(0,r.useState)(!1),{account:p,mintKUBIX:f,createTask:b}=(0,g.Z)(),{taskManagerContractAddress:y}=(0,I.f)(),{taskCount:w}=(0,ee.d)(),k=(0,T.p)(),{getUsernameByAddress:C}=(0,j.v)(),S=(0,r.useRef)(!0),P=(0,r.useRef)(!0);(0,r.useEffect)(()=>{S.current=!0},[!0]),(0,r.useEffect)(()=>{P.current=!0},[!0]);let H=async e=>{if("Open"===t){let t=((e,t)=>{let{base:s,multiplier:i}={easy:{base:1,multiplier:16.5},medium:{base:4,multiplier:24},hard:{base:10,multiplier:30},veryHard:{base:25,multiplier:37.5}}[e];return Math.round(s+i*t)})(e.difficulty,e.estHours),s={...e,id:"0x".concat(w,"-").concat(y),claimedBy:"",claimerUsername:"",submission:"",Payout:t};await b(y,t,e.description,l,e.estHours,e.difficulty,"Open",e.name),d(s,"open","open",0," ",0)}},N=async(e,t)=>{e={...e,difficulty:e.difficulty,estHours:e.estHours},await h(e,o,t,l),k({title:"Task edited.",description:"Your task was successfully edited.",status:"success",duration:3e3,isClosable:!0})},[{isOver:_},D]=(0,v.L)(()=>({accept:"task",drop:async e=>{if(S.current||"Completed"==t){if(P.current||"Completed"!==t)"Completed"===t&&(console.log("item.claimedBy: ",e.claimedBy),console.log("item.kubixPayout: ",e.kubixPayout),setTimeout(async()=>{await f(e.claimedBy,e.kubixPayout,!0)},2100));else{alert("You must be an Executive to review tasks.");return}}else{alert("You must own an NFT to move tasks. Go to user to join");return}if("completed"===e.columnId){alert("You cannot move tasks from the Completed column.");return}if(e.columnId!==o){let i=s.length;console.log(e.claimerUsername);let r="In Progress"===t?p:e.claimedBy,l="In Progress"===t?await C(p):e.claimerUsername;console.log("claimerUserValue: ",l);let a={...e,id:e.id,name:e.name,description:e.description,difficulty:e.difficulty,estHours:e.estHours,claimedBy:r,claimerUsername:l};n.push({pathname:"/tasks/"},void 0,{shallow:!0}),await d(a,e.columnId,o,i,e.submission,r),k({title:"Task moved.",description:"Your task was successfully moved.",status:"success",duration:3e3,isClosable:!0})}},collect:e=>({isOver:e.isOver()})})),W=_?{backgroundColor:"rgba(0, 255, 0, 0.1)"}:{};return(0,i.jsxs)(a.xu,{ref:D,w:"100%",h:"100%",bg:"transparent",borderRadius:"xl",boxShadow:"lg",style:{...W,position:"relative"},zIndex:1,children:[(0,i.jsx)("div",{className:"glass",style:et}),(0,i.jsxs)(c.X,{size:"md",mb:3,mt:0,ml:3,alignItems:"center",color:"white",children:[t,"Open"===t&&(0,i.jsx)(R.h,{ml:8,icon:(0,i.jsx)(E.d,{color:"white"}),"aria-label":"Add task",onClick:()=>{"Open"===t&&m(!0)},h:"1.60rem",w:"1.60rem",minW:0,bg:"",border:".5px solid white",boxshadow:"md"})]}),(0,i.jsx)(a.xu,{h:"calc(100% - 3rem)",borderRadius:"md",bg:"transparent",p:2,style:W,overflowY:"auto",children:s.map((e,t)=>(0,i.jsx)($,{id:e.id,name:e.name,description:e.description,difficulty:e.difficulty,estHours:e.estHours,submission:e.submission,claimedBy:e.claimedBy,Payout:e.Payout,claimerUsername:e.claimerUsername,columnId:o,projectId:e.projectId,onEditTask:e=>N(e,t)},e.id))}),"Open"===t&&(0,i.jsx)(Q,{isOpen:x,onClose:()=>{m(!1)},onAddTask:H})]})};let ei={width:"100%",height:"100%",borderRadius:"3xl",backdropFilter:"blur(20px)",backgroundColor:"rgba(0, 0, 0, .3)"};var er=e=>{let{columns:t,projectName:s}=e,{taskColumns:o,setTaskColumns:l}=z();return(0,r.useEffect)(()=>{l(t)},[t,l]),(0,i.jsx)(f.W,{backend:b.PD,children:(0,i.jsxs)(d.g,{w:"100%",align:"stretch",children:[(0,i.jsx)(a.xu,{bg:"purple.300",w:"100%",p:2,children:(0,i.jsx)(p.x,{ml:5,fontSize:"2xl",fontWeight:"bold",color:"black",children:s})}),(0,i.jsx)(n.k,{direction:{base:"column",md:"row"},justifyContent:"space-between",w:"100%",overflowX:"hidden",overflowY:"hidden",minHeight:"calc(100vh - 148px)",wrap:{base:"nowrap",md:"nowrap"},mt:0,children:o&&o.map(e=>(0,i.jsx)(a.xu,{flex:"1 1 100%",mx:{base:0,md:.5},p:2,borderRadius:"xl",position:"relative",sx:ei,children:(0,i.jsx)(es,{title:e.title,tasks:e.tasks,columnId:e.id,projectName:s,zIndex:1})},e.id))})]})})},eo=()=>{let{projects:e,selectedProject:t,setSelectedProject:s,handleUpdateColumns:r}=(0,j.v)(),{account:o,createProject:l}=(0,g.Z)(),{taskManagerContractAddress:a}=(0,I.f)();return(0,i.jsxs)(n.k,{minHeight:"calc(100vh - 80px)",children:[(0,i.jsx)(S,{projects:e,selectedProject:t,onSelectProject:t=>{console.log("selecting project",t);let i=e.find(e=>e.id===t);s(i),console.log("selected",i)},onCreateProject:e=>l(a,e)}),t?(0,i.jsx)(H,{projectId:t.id,initialColumns:t.columns,account:o,children:(0,i.jsx)(er,{columns:t.columns,projectName:t.name})},t.id):(0,i.jsx)(n.k,{flexGrow:1,justifyContent:"center",alignItems:"center",children:(0,i.jsx)("div",{children:"No projects selected, please create or select a project."})})]})},el=s(70424),ea=()=>{let e=(0,K.useRouter)(),{setSelectedProjectId:t,projects:s}=(0,j.v)(),{poContextLoading:n}=(0,I.f)(),c=(0,r.useRef)();return(0,r.useEffect)(()=>{null!==e.query.projectId&&(console.log("project id",e.query.projectId),t(s,e.query.projectId))},[e.query.projectId,s]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(el.Z,{}),n?(0,i.jsx)(o.M,{height:"90vh",children:(0,i.jsx)(l.$,{size:"xl"})}):(0,i.jsx)(a.xu,{minH:"90vh",position:"relative",bg:"blackAlpha.600",ref:c,children:(0,i.jsx)(eo,{})})]})}},70424:function(e,t,s){"use strict";s.d(t,{Z:function(){return p}});var i=s(85893),r=s(67294),o=s(57747),l=s(93717),a=s(32883),n=s(6089),c=s(41664),d=s.n(c),u=s(11163),h=s(14225),x=s(98280),m=()=>{let{address:e,hasMemberNFT:t}=(0,x.S)(),[s,o]=(0,r.useState)("Connect Wallet"),[l,a]=(0,r.useState)("user");return(0,r.useEffect)(()=>{t?(o("Profile Hub"),a("profileHub")):o("Join or Connect")},[t,e]),(0,i.jsx)(d(),{href:"/".concat(l,"/"),passHref:!0,children:(0,i.jsx)(h.z,{bgGradient:"linear(to-r, teal.300, green.300)",color:"white",_hover:{bgGradient:"linear(to-r, teal.600, green.600)"},_active:{bgGradient:"linear(to-r, teal.700, green.700)"},borderRadius:"full",px:"6",py:"2",fontSize:"lg",fontWeight:"bold",textColor:"black",onClick:e=>{},children:s})})},p=()=>((0,u.useRouter)(),(0,i.jsx)(o.xu,{bg:"black",p:2.5,alignItems:"center",children:(0,i.jsxs)(l.k,{alignItems:"center",h:"70px",maxW:"100%",justifyContent:"space-between",children:[(0,i.jsx)(o.xu,{h:"100%",w:"12%",pb:2,pl:10,mr:{base:"4",md:"14"},children:(0,i.jsx)(a.r,{as:d(),href:"/home",passHref:!0,children:(0,i.jsx)(n.E,{src:"/images/kubi_white_logo.png",alt:"Your Logo",height:"113%",width:"auto",objectFit:"contain"})})}),(0,i.jsxs)(l.k,{justifyContent:"space-between",flexGrow:1,ml:4,mr:4,alignItems:"center",children:[(0,i.jsx)(a.r,{as:d(),href:"/dashboard",color:"white",fontWeight:"extrabold",fontSize:"xl",mx:"2%",children:"Dashboard"}),(0,i.jsx)(a.r,{as:d(),href:"/tasks",color:"white",fontWeight:"extrabold",fontSize:"xl",mx:"2%",children:"Tasks"}),(0,i.jsx)(a.r,{as:d(),href:"/voting",color:"white",fontWeight:"extrabold",fontSize:"xl",mx:"2%",children:"Voting"}),(0,i.jsx)(m,{})]})]})}))}},function(e){e.O(0,[157,2601,2888,9774,179],function(){return e(e.s=56670)}),_N_E=e.O()}]);